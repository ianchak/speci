
> speci@0.2.0 test
> vitest run banner-animation.test.ts


[1m[46m RUN [49m[22m [36mv4.0.18 [39m[90mC:/Users/ianchak/Projects/speci[39m

[90mstdout[2m | test/banner-animation.test.ts[2m > [22m[2manimateBanner[2m > [22m[2mError handling - terminal state capture failure (E-7)[2m > [22m[2mdoes not register cleanup on early failure
[22m[39m
  Ã”Ä¾Å‚Ã”Ä¾Å‚Ã”Ä¾Å‚Ã”Ä¾Å‚Ã”Ä¾Å‚Ã”Ä¾Å‚Ã”Ä¾Å‚Ã”Ä½ÅšÃ”Ä¾Å‚Ã”Ä¾Å‚Ã”Ä¾Å‚Ã”Ä¾Å‚Ã”Ä¾Å‚Ã”Ä¾Å‚Ã”Ä½Åš Ã”Ä¾Å‚Ã”Ä¾Å‚Ã”Ä¾Å‚Ã”Ä¾Å‚Ã”Ä¾Å‚Ã”Ä¾Å‚Ã”Ä¾Å‚Ã”Ä½Åš Ã”Ä¾Å‚Ã”Ä¾Å‚Ã”Ä¾Å‚Ã”Ä¾Å‚Ã”Ä¾Å‚Ã”Ä¾Å‚Ã”Ä½ÅšÃ”Ä¾Å‚Ã”Ä¾Å‚Ã”Ä½Åš
  Ã”Ä¾Å‚Ã”Ä¾Å‚Ã”Ä½Ã¶Ã”Ä½Ã‰Ã”Ä½Ã‰Ã”Ä½Ã‰Ã”Ä½Ã‰Ã”Ä½ÅÃ”Ä¾Å‚Ã”Ä¾Å‚Ã”Ä½Ã¶Ã”Ä½Ã‰Ã”Ä½Ã‰Ã”Ä¾Å‚Ã”Ä¾Å‚Ã”Ä½ÅšÃ”Ä¾Å‚Ã”Ä¾Å‚Ã”Ä½Ã¶Ã”Ä½Ã‰Ã”Ä½Ã‰Ã”Ä½Ã‰Ã”Ä½Ã‰Ã”Ä½ÅÃ”Ä¾Å‚Ã”Ä¾Å‚Ã”Ä½Ã¶Ã”Ä½Ã‰Ã”Ä½Ã‰Ã”Ä½Ã‰Ã”Ä½Ã‰Ã”Ä½ÅÃ”Ä¾Å‚Ã”Ä¾Å‚Ã”Ä½Ä¹
  Ã”Ä¾Å‚Ã”Ä¾Å‚Ã”Ä¾Å‚Ã”Ä¾Å‚Ã”Ä¾Å‚Ã”Ä¾Å‚Ã”Ä¾Å‚Ã”Ä½ÅšÃ”Ä¾Å‚Ã”Ä¾Å‚Ã”Ä¾Å‚Ã”Ä¾Å‚Ã”Ä¾Å‚Ã”Ä¾Å‚Ã”Ä½Ã¶Ã”Ä½ÅÃ”Ä¾Å‚Ã”Ä¾Å‚Ã”Ä¾Å‚Ã”Ä¾Å‚Ã”Ä¾Å‚Ã”Ä½Åš  Ã”Ä¾Å‚Ã”Ä¾Å‚Ã”Ä½Ä¹     Ã”Ä¾Å‚Ã”Ä¾Å‚Ã”Ä½Ä¹
  Ã”Ä½ÃœÃ”Ä½Ã‰Ã”Ä½Ã‰Ã”Ä½Ã‰Ã”Ä½Ã‰Ã”Ä¾Å‚Ã”Ä¾Å‚Ã”Ä½Ä¹Ã”Ä¾Å‚Ã”Ä¾Å‚Ã”Ä½Ã¶Ã”Ä½Ã‰Ã”Ä½Ã‰Ã”Ä½Ã‰Ã”Ä½Å Ã”Ä¾Å‚Ã”Ä¾Å‚Ã”Ä½Ã¶Ã”Ä½Ã‰Ã”Ä½Ã‰Ã”Ä½Å  Ã”Ä¾Å‚Ã”Ä¾Å‚Ã”Ä½Ä¹     Ã”Ä¾Å‚Ã”Ä¾Å‚Ã”Ä½Ä¹
  Ã”Ä¾Å‚Ã”Ä¾Å‚Ã”Ä¾Å‚Ã”Ä¾Å‚Ã”Ä¾Å‚Ã”Ä¾Å‚Ã”Ä¾Å‚Ã”Ä½Ä¹Ã”Ä¾Å‚Ã”Ä¾Å‚Ã”Ä½Ä¹     Ã”Ä¾Å‚Ã”Ä¾Å‚Ã”Ä¾Å‚Ã”Ä¾Å‚Ã”Ä¾Å‚Ã”Ä¾Å‚Ã”Ä¾Å‚Ã”Ä½ÅšÃ”Ä½ÃœÃ”Ä¾Å‚Ã”Ä¾Å‚Ã”Ä¾Å‚Ã”Ä¾Å‚Ã”Ä¾Å‚Ã”Ä¾Å‚Ã”Ä½ÅšÃ”Ä¾Å‚Ã”Ä¾Å‚Ã”Ä½Ä¹
  Ã”Ä½ÃœÃ”Ä½Ã‰Ã”Ä½Ã‰Ã”Ä½Ã‰Ã”Ä½Ã‰Ã”Ä½Ã‰Ã”Ä½Ã‰Ã”Ä½ÅÃ”Ä½ÃœÃ”Ä½Ã‰Ã”Ä½Å     Ã”Ä½ÃœÃ”Ä½Ã‰Ã”Ä½Ã‰Ã”Ä½Ã‰Ã”Ä½Ã‰Ã”Ä½Ã‰Ã”Ä½Ã‰Ã”Ä½Å Ã”Ä½ÃœÃ”Ä½Ã‰Ã”Ä½Ã‰Ã”Ä½Ã‰Ã”Ä½Ã‰Ã”Ä½Ã‰Ã”Ä½ÅÃ”Ä½ÃœÃ”Ä½Ã‰Ã”Ä½Å
               v0.2.0


 [31mÃ”ÅÂ»[39m test/banner-animation.test.ts [2m([22m[2m202 tests[22m[2m | [22m[31m6 failed[39m[2m)[22m[33m 138284[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m should import without errors[32m 81[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m should define DURATION constant with correct type[32m 0[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m should define FRAME_INTERVAL constant with correct type[32m 0[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m should define FPS_TARGET constant with correct type[32m 0[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m should have reasonable animation timing values[32m 0[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m should compile without TypeScript errors[32m 0[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m parses sky-200 (#0ea5e9)[32m 1[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m parses sky-400 (#0284c7)[32m 0[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m parses sky-500 (#0369a1)[32m 0[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m parses black (#000000)[32m 0[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m parses white (#ffffff)[32m 0[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m returns start color at t=0[32m 0[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m returns end color at t=1[32m 0[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m interpolates midpoint correctly at t=0.5[32m 0[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m interpolates across palette (sky200Ã”Ä‡Äºsky400Ã”Ä‡Äºsky500)[32m 0[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m generates ANSI escape for sky-200[32m 0[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m generates ANSI escape for sky-400[32m 0[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m generates ANSI escape for sky-500[32m 0[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m contains proper escape code prefix[32m 0[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m uses RGB values in correct order[32m 0[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m end-to-end: hex Ã”Ä‡Äº RGB Ã”Ä‡Äº ANSI[32m 0[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m interpolation chain: hexA Ã”Ä‡Äº lerp Ã”Ä‡Äº hexToAnsi Ã”Ä‡Äº ANSI[32m 0[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m all palette colors produce valid ANSI codes[32m 0[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m should define MIN_TERMINAL_HEIGHT constant[32m 0[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m should equal 10 lines[32m 0[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m should be a number[32m 0[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m should export hasMinimumHeight function[32m 0[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m should return false when rows < 10[32m 0[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m should return true when rows >= 10[32m 0[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m should return false when rows is undefined (non-TTY)[32m 0[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m should handle edge case: rows = 0[32m 0[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m should handle edge case: rows = 1[32m 0[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m should handle very large terminal height[32m 0[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m returns true when all conditions are met[32m 1[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m returns false when color not supported (E-2)[32m 0[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m returns false when not TTY (E-1)[32m 0[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m returns false when NO_COLOR set (E-3)[32m 0[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m returns false when SPECI_NO_ANIMATION set[32m 0[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m returns false when --no-color flag is set (color: false)[32m 0[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m returns false when width < 40 (E-4)[32m 0[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m returns false when height < 10 (E-5)[32m 0[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m NO_COLOR with empty string is falsy (animation enabled)[32m 0[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m NO_COLOR=0 disables animation (string "0" is truthy)[32m 0[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m NO_COLOR=false disables animation (string "false" is truthy)[32m 0[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m SPECI_NO_ANIMATION with empty string is falsy (animation enabled)[32m 0[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m SPECI_NO_ANIMATION=1 disables animation[32m 0[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m SPECI_NO_ANIMATION=0 disables animation (string "0" is truthy)[32m 0[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m SPECI_NO_ANIMATION=false disables animation (string "false" is truthy)[32m 0[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m uses default width 80 when columns undefined[32m 0[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m uses default height 24 when rows undefined[32m 0[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m returns false for explicitly narrow terminal even with default[32m 0[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m accepts exactly width 40 (boundary)[32m 0[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m accepts exactly height 10 (boundary)[32m 0[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m rejects width 39 (below boundary)[32m 0[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m rejects height 9 (below boundary)[32m 0[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m handles both dimensions undefined (defaults pass)[32m 0[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m returns false when color: false option is passed[32m 0[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m returns true when color: true option is passed and all conditions met[32m 0[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m returns true when no options passed (backward compatibility)[32m 0[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m returns true when empty options object passed[32m 0[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m color: false takes precedence over all other conditions[32m 0[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m color: true does not override other failing conditions[32m 0[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m resolves after specified duration (with tolerance)[32m 52[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m accumulates delays correctly in consecutive calls[32m 94[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m handles zero delay (immediate resolution)[32m 16[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m handles minimal delay (1ms)[32m 15[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m returns Promise<void>[32m 15[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m can be used with Promise.race[32m 0[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m can be cancelled via Promise.race timeout[32m 62[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m supports 60fps frame timing (16ms)[32m 140[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m returns all spaces at progress 0 (nothing revealed)[32m 2[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m returns fully colored banner at progress 1 (fully revealed)[32m 2[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m returns half-revealed banner at progress 0.5[32m 1[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m clamps negative progress to 0[32m 0[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m clamps progress > 1.0 to 1.0[32m 0[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m handles NaN progress (coerces to 0)[32m 0[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m handles Infinity progress (clamps to 1.0)[32m 0[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m applies gradient across revealed characters[32m 0[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m applies ANSI reset after each character[32m 0[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m gradient interpolates from left to right[32m 1[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m returns exactly 6 lines[32m 1[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m each line is non-empty string[32m 0[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m preserves BANNER_ART line order[32m 0[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m maintains correct line length after stripping ANSI codes[32m 0[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m reveals more characters as progress increases[32m 1[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m reveals approximately correct percentage at various progress values[32m 0[2mms[22m[39m
         [32mÃ”Å¥Ã´[39m executes loop until progress >= 1.0[32m 129[2mms[22m[39m
         [32mÃ”Å¥Ã´[39m renders final frame at progress=1.0[32m 109[2mms[22m[39m
         [32mÃ”Å¥Ã´[39m writes cursor up escape code between frames[32m 109[2mms[22m[39m
         [32mÃ”Å¥Ã´[39m does not clear before first frame[32m 109[2mms[22m[39m
         [32mÃ”Å¥Ã´[39m clears before second and subsequent frames[32m 110[2mms[22m[39m
         [32mÃ”Å¥Ã´[39m clamps duration below 100ms to 100ms[32m 122[2mms[22m[39m
         [33m[2mÃ”Å¥Ã´[22m[39m clamps duration above 5000ms to 5000ms [33m 5011[2mms[22m[39m
         [32mÃ”Å¥Ã´[39m respects normal duration within valid range[32m 218[2mms[22m[39m
         [32mÃ”Å¥Ã´[39m propagates effect rendering errors (E-6)[32m 4[2mms[22m[39m
         [32mÃ”Å¥Ã´[39m propagates stdout write errors (E-6)[32m 0[2mms[22m[39m
         [32mÃ”Å¥Ã´[39m writes each frame line followed by newline[32m 103[2mms[22m[39m
         [32mÃ”Å¥Ã´[39m writes multiple frames with correct structure[32m 110[2mms[22m[39m
         [32mÃ”Å¥Ã´[39m uses time-based progress not frame count[32m 202[2mms[22m[39m
         [32mÃ”Å¥Ã´[39m reaches progress=1.0 regardless of frame timing jitter[32m 169[2mms[22m[39m
         [33m[2mÃ”Å¥Ã´[22m[39m completes full animation with renderWaveFrame [33m 2009[2mms[22m[39m
         [32mÃ”Å¥Ã´[39m generates valid wave frames throughout animation[32m 111[2mms[22m[39m
         [32mÃ”Å¥Ã´[39m handles zero-length animation (clamped to 100ms)[32m 105[2mms[22m[39m
         [32mÃ”Å¥Ã´[39m handles negative duration (clamped to 100ms)[32m 108[2mms[22m[39m
         [33m[2mÃ”Å¥Ã´[22m[39m handles very large duration (clamped to 5000ms) [33m 5029[2mms[22m[39m
         [32mÃ”Å¥Ã´[39m handles effect returning empty lines[32m 109[2mms[22m[39m
       [33m[2mÃ”Å¥Ã´[22m[39m executes full animation and cleans up [33m 2031[2mms[22m[39m
       [33m[2mÃ”Å¥Ã´[22m[39m completes animation in expected duration [33m 2014[2mms[22m[39m
       [33m[2mÃ”Å¥Ã´[22m[39m hides cursor before animation starts [33m 2014[2mms[22m[39m
       [33m[2mÃ”Å¥Ã´[22m[39m shows cursor after animation completes [33m 2004[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m falls back to static banner on terminal state capture failure[32m 2[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m does not register cleanup on early failure[32m 2[2mms[22m[39m
       [33m[2mÃ”Å¥Ã´[22m[39m continues animation on cursor hide failure [33m 2007[2mms[22m[39m
       [33m[2mÃ”Å¥Ã´[22m[39m continues animation on cleanup registration failure [33m 2005[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m handles animation errors gracefully[32m 1[2mms[22m[39m
       [33m[2mÃ”Å¥Ã´[22m[39m cleanup handler is idempotent (safe to call multiple times) [33m 2004[2mms[22m[39m
       [33m[2mÃ”Å¥Ã´[22m[39m cleanup handles null terminalSnapshot gracefully [33m 2018[2mms[22m[39m
       [33m[2mÃ”Å¥Ã´[22m[39m tracks timer ID during animation [33m 2032[2mms[22m[39m
       [33m[2mÃ”Å¥Ã´[22m[39m tracks timer during animation and clears on normal completion [33m 2016[2mms[22m[39m
       [33m[2mÃ”Å¥Ã´[22m[39m cleanup is idempotent with timer clearing [33m 2033[2mms[22m[39m
       [33m[2mÃ”Å¥Ã´[22m[39m cleanup function clears timerId when called [33m 2028[2mms[22m[39m
       [33m[2mÃ”Å¥Ã´[22m[39m handles null timerId gracefully in cleanup [33m 2006[2mms[22m[39m
       [33m[2mÃ”Å¥Ã´[22m[39m sets isRunning to false on cleanup [33m 2033[2mms[22m[39m
       [33m[2mÃ”Å¥Ã´[22m[39m registers cleanup handler for signal interruption [33m 2026[2mms[22m[39m
       [33m[2mÃ”Å¥Ã´[22m[39m unregisters cleanup handler after completion [33m 2025[2mms[22m[39m
       [33m[2mÃ”Å¥Ã´[22m[39m uses DURATION constant for animation [33m 2029[2mms[22m[39m
       [33m[2mÃ”Å¥Ã´[22m[39m renders full animation with wave effect [33m 2007[2mms[22m[39m
       [33m[2mÃ”Å¥Ã´[22m[39m captures terminal state before animation [33m 2031[2mms[22m[39m
       [33m[2mÃ”Å¥Ã´[22m[39m restores terminal state after animation [33m 2005[2mms[22m[39m
       [33m[2mÃ”Å¥Ã´[22m[39m restores terminal state even on error [33m 2019[2mms[22m[39m
       [33m[2mÃ”Å¥Ã´[22m[39m logs cleanup errors without throwing [33m 2007[2mms[22m[39m
       [33m[2mÃ”Å¥Ã´[22m[39m falls back to static banner on animation loop error [33m 2021[2mms[22m[39m
       [33m[2mÃ”Å¥Ã´[22m[39m falls back to static banner on renderWaveFrame error [33m 2012[2mms[22m[39m
       [33m[2mÃ”Å¥Ã´[22m[39m displays static banner with surrounding newlines on fallback [33m 2009[2mms[22m[39m
       [33m[2mÃ”Å¥Ã´[22m[39m handles all animation errors with static banner fallback [33m 2013[2mms[22m[39m
       [33m[2mÃ”Å¥Ã´[22m[39m ensures static banner format matches static path [33m 2003[2mms[22m[39m
[31m       [31mâ”œÅš[31m uses wave effect when options.effect is "wave"[39m[33m 2023[2mms[22m[39m
[31m       [31mâ”œÅš[31m uses fade effect when options.effect is "fade"[39m[33m 2006[2mms[22m[39m
[31m       [31mâ”œÅš[31m uses sweep effect when options.effect is "sweep"[39m[33m 2021[2mms[22m[39m
[31m       [31mâ”œÅš[31m overrides random selection when effect is specified[39m[33m 2003[2mms[22m[39m
[31m       [31mâ”œÅš[31m uses random selection when no effect is specified[39m[33m 2011[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m returns fully-black banner at progress 0[32m 5[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m returns fully-colored banner at progress 1[32m 2[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m returns intermediate fade state at progress 0.5[32m 1[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m clamps negative progress to 0[32m 0[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m clamps progress > 1 to 1[32m 0[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m returns 6-line array matching banner structure[32m 1[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m all lines are non-empty strings[32m 1[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m returns fallback banner on error (E-13)[32m 1[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m returns all hidden at progress 0[32m 0[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m returns fully-revealed banner at progress 1[32m 1[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m returns half-swept banner at progress 0.5[32m 1[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m clamps negative progress to 0[32m 0[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m clamps progress > 1 to 1[32m 0[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m returns 6-line array matching banner structure[32m 0[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m all lines are non-empty strings[32m 0[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m reveals more characters as progress increases[32m 0[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m returns fallback banner on error (E-13)[32m 0[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m produces identical results to non-cached version[32m 0[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m handles multiple effect renders consistently[32m 1[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m works for all effect types[32m 1[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m does not cause cross-frame contamination[32m 0[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m handles rapid sequential renders[32m 0[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m renders frames with acceptable performance[32m 4[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m handles multiple effect types efficiently[32m 10[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m memory usage remains stable across multiple renders[32m 51[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m produces valid ANSI output[32m 0[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m handles all characters correctly[32m 0[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m animation produces frame output[32m 116[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m should export selectRandomEffect function[32m 1[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m selects wave effect when Math.random returns 0.0[32m 1[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m selects fade effect when Math.random returns 0.4[32m 0[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m selects sweep effect when Math.random returns 0.8[32m 0[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m selects effect at exact boundary (0.333...)[32m 0[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m selects effect at exact boundary (0.666...)[32m 0[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m handles Math.random returning 0.99[32m 0[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m returns valid AnimationEffect function[32m 1[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m all effects in array are valid functions[32m 0[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m produces different effects across multiple calls with varying random values[32m 0[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m consistently returns same effect for same Math.random value[32m 0[2mms[22m[39m
       [33m[2mÃ”Å¥Ã´[22m[39m completes within 3-second limit with default settings [33m 2009[2mms[22m[39m
       [33m[2mÃ”Å¥Ã´[22m[39m duration stays within tolerance for multiple runs [33m 6072[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m maintains 60 FPS target with default settings[32m 1[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m frame count matches expected calculation[32m 1[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m handles 30 FPS target correctly[32m 1[2mms[22m[39m
       [33m[2mÃ”Å¥Ã´[22m[39m CPU usage remains below 25% of wall time [33m 2030[2mms[22m[39m
       [33m[2mÃ”Å¥Ã´[22m[39m no busy-wait loops detected [33m 2014[2mms[22m[39m
       [33m[2mÃ”Å¥Ã´[22m[39m CPU usage consistent across multiple runs [33m 6034[2mms[22m[39m
       [33m[2mÃ”Å¥Ã´[22m[39m no memory leaks from timers [33m 10065[2mms[22m[39m
[31m       [31mâ”œÅš[31m no leaks from cleanup handlers[39m[33m 6377[2mms[22m[39m
       [33m[2mÃ”Å¥Ã´[22m[39m heap remains stable during long animation [33m 10099[2mms[22m[39m
       [33m[2mÃ”Å¥Ã´[22m[39m animation is non-blocking (returns control) [33m 2012[2mms[22m[39m
       [33m[2mÃ”Å¥Ã´[22m[39m multiple animations can be queued [33m 2019[2mms[22m[39m
       [33m[2mÃ”Å¥Ã´[22m[39m animation cleanup happens without blocking [33m 2010[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m gradient cache reduces computation time[32m 14[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m all effects benefit from gradient cache[32m 12[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m gradient cache does not cause memory issues[32m 224[2mms[22m[39m
       [33m[2mÃ”Å¥Ã´[22m[39m complete animation meets all performance targets [33m 2012[2mms[22m[39m
       [33m[2mÃ”Å¥Ã´[22m[39m performance consistent across different effects [33m 6073[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m verifies animation constants are production-ready[32m 1[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m constants produce sufficient frame count[32m 1[2mms[22m[39m
       [32mÃ”Å¥Ã´[39m FPS target aligns with frame interval[32m 1[2mms[22m[39m

Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â» Failed Tests 6 Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»

 FAIL  test/banner-animation.test.ts > animateBanner > Effect Override (TASK_015) > uses wave effect when options.effect is "wave"
AssertionError: expected null to be [Function renderWaveFrame] // Object.is equality

- Expected: 
[Function renderWaveFrame]

+ Received: 
null

 Ã”ÅÂ» test/banner-animation.test.ts:2252:30
    2250| 
    2251|       // Verify wave effect was selected
    2252|       expect(capturedEffect).toBe(module.renderWaveFrame);
       |                              ^
    2253|     });
    2254| 

Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»[1/6]Ã”Ã„Â»

 FAIL  test/banner-animation.test.ts > animateBanner > Effect Override (TASK_015) > uses fade effect when options.effect is "fade"
AssertionError: expected null to be [Function renderFadeFrame] // Object.is equality

- Expected: 
[Function renderFadeFrame]

+ Received: 
null

 Ã”ÅÂ» test/banner-animation.test.ts:2277:30
    2275| 
    2276|       // Verify fade effect was selected
    2277|       expect(capturedEffect).toBe(module.renderFadeFrame);
       |                              ^
    2278|     });
    2279| 

Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»[2/6]Ã”Ã„Â»

 FAIL  test/banner-animation.test.ts > animateBanner > Effect Override (TASK_015) > uses sweep effect when options.effect is "sweep"
AssertionError: expected null to be [Function renderSweepFrame] // Object.is equality

- Expected: 
[Function renderSweepFrame]

+ Received: 
null

 Ã”ÅÂ» test/banner-animation.test.ts:2302:30
    2300| 
    2301|       // Verify sweep effect was selected
    2302|       expect(capturedEffect).toBe(module.renderSweepFrame);
       |                              ^
    2303|     });
    2304| 

Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»[3/6]Ã”Ã„Â»

 FAIL  test/banner-animation.test.ts > animateBanner > Effect Override (TASK_015) > overrides random selection when effect is specified
AssertionError: expected null to be [Function renderWaveFrame] // Object.is equality

- Expected: 
[Function renderWaveFrame]

+ Received: 
null

 Ã”ÅÂ» test/banner-animation.test.ts:2331:30
    2329| 
    2330|       // Should use wave effect (override random), not fade
    2331|       expect(capturedEffect).toBe(module.renderWaveFrame);
       |                              ^
    2332|     });
    2333| 

Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»[4/6]Ã”Ã„Â»

 FAIL  test/banner-animation.test.ts > animateBanner > Effect Override (TASK_015) > uses random selection when no effect is specified
AssertionError: expected null to be [Function renderSweepFrame] // Object.is equality

- Expected: 
[Function renderSweepFrame]

+ Received: 
null

 Ã”ÅÂ» test/banner-animation.test.ts:2360:30
    2358| 
    2359|       // Should use sweep effect based on Math.random
    2360|       expect(capturedEffect).toBe(module.renderSweepFrame);
       |                              ^
    2361|     });
    2362|   });

Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»[5/6]Ã”Ã„Â»

 FAIL  test/banner-animation.test.ts > Performance Benchmarks (TASK_021) > Memory Stability > no leaks from cleanup handlers
AssertionError: expected 17810352 to be less than 1048576
 Ã”ÅÂ» test/banner-animation.test.ts:3110:32
    3108| 
    3109|       // Growth between runs should be minimal
    3110|       expect(Math.abs(growth)).toBeLessThan(1024 * 1024); // < 1MB
       |                                ^
    3111|     }, 10000); // 10 second timeout for 3 animation runs
    3112| 

Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»[6/6]Ã”Ã„Â»


[2m Test Files [22m [1m[31m1 failed[39m[22m[90m (1)[39m
[2m      Tests [22m [1m[31m6 failed[39m[22m[2m | [22m[1m[32m196 passed[39m[22m[90m (202)[39m
[2m   Start at [22m 02:47:02
[2m   Duration [22m 138.59s[2m (transform 135ms, setup 0ms, import 149ms, tests 138.28s, environment 0ms)[22m

